require=function t(e,n,o){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(c)return c(a,!0);var r=new Error("Cannot find module '"+a+"'");throw r.code="MODULE_NOT_FOUND",r}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return i(n?n:t)},h,h.exports,t,e,n,o)}return n[a].exports}for(var c="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({AnswerButton:[function(t,e,n){"use strict";cc._RF.push(e,"25bf1FTAv9OGZ9Z0ctRAvBi","AnswerButton"),cc.Class({"extends":cc.Component,properties:{label:{"default":null,type:cc.Label},data:{"default":null,visible:!1}},onLoad:function(){this.node.on("mouseenter",this._onTouchStart,this),this.node.on("mouseleave",this._onTouchEnd,this)},setText:function(t){this.label.string=t;var e=t.indexOf("\n"),n=t.lastIndexOf("\n");e>0&&n!=e?this.node.height=120:e>0?this.node.height=80:this.node.height=60},_onTouchStart:function(t){this.activeTouch={time:Date.now},this.label.node.color=this.getClr("#d2ba92"),console.log(this.label.node)},getClr:function(t){var e=new cc.Color;return e.fromHEX(t),e},_onTouchEnd:function(t){this.activeTouch&&(this.label.node.color=this.getClr("#BF2523"),this.activeTouch=null)},_onTouchCancel:function(){this._onTouchEnd(null)}}),cc._RF.pop()},{}],ClickWithLabelMove:[function(t,e,n){"use strict";cc._RF.push(e,"0b7aaleFtZLUpf4iO/QCCJD","ClickWithLabelMove"),cc.Class({"extends":cc.Component,properties:{label:{"default":null,type:cc.Node},targetY:0,origY:{visible:!1,"default":1},targetX:0,origX:{visible:!1,"default":1},activeTouch:{visible:!1,"default":null},origScale:{visible:!1,"default":1},sprite:{visible:!1,"default":1},startEnabled:!0,targetScale:1,clickEvent:{"default":null,type:cc.Component.EventHandler},normalSprite:{"default":null,visible:!1},hoverSprite:{"default":null,type:cc.SpriteFrame},pressedSprite:{"default":null,type:cc.SpriteFrame}},onLoad:function(){this.origScale=this.node.scale,this.origY=this.label.y,this.origX=this.label.x,this.sprite=this.node.getComponent(cc.Sprite),this.normalSprite=this.sprite.spriteFrame,this.startEnabled&&this.enableTouch()},enableTouch:function(){this.node.on("touchstart",this._onTouchStart,this),this.node.on("touchend",this._onTouchEnd,this),this.node.on("touchcancel",this._onTouchCancel,this)},disableTouch:function(){this.node.off("touchstart",this._onTouchStart,this),this.node.off("touchend",this._onTouchEnd,this),this.node.off("touchcancel",this._onTouchCancel,this)},_onTouchStart:function(t){return this.activeTouch={time:Date.now,start:t.touch.getLocation()},this.node.scale=this.targetScale*this.origScale,this.label.y=this.targetY,this.label.x=this.targetX,this.pressedSprite&&(this.sprite.spriteFrame=this.pressedSprite),!1},_onTouchEnd:function(t){if(this.activeTouch){var e=t.touch.getLocation();this.node.scale=this.origScale,this.label.y=this.origY,this.label.x=this.origX,this.sprite.spriteFrame=this.normalSprite;var n=Math.abs(this.activeTouch.start.x-e.x);if(n>30)return!1;var o=Date.now-this.activeTouch.time;if(o>.5)return!1;this.node.emit(MTEvents.CLICKED);var i=this.clickEvent;if(i){var c=i.target.getComponent(i.component),a=c[i.handler];a.bind(c)()}return this.activeTouch=null,!0}},_onTouchCancel:function(){this.node.scale=this.origScale,this.label.y=this.origY,this.label.x=this.origX,this.sprite.spriteFrame=this.normalSprite,this.activeTouch=null}}),cc._RF.pop()},{}],ClickWithScale:[function(t,e,n){"use strict";cc._RF.push(e,"f38faz/KyxEApLr/5iahAgb","ClickWithScale"),cc.Class({"extends":cc.Component,properties:{activeTouch:{visible:!1,"default":null},origScale:{visible:!1,"default":1},startEnabled:!0,targetScale:.95,clickEvent:{"default":null,type:cc.Component.EventHandler}},onLoad:function(){this.origScale=this.node.scale,this.startEnabled&&this.enableTouch()},enableTouch:function(){this.node.on("touchstart",this._onTouchStart,this),this.node.on("touchend",this._onTouchEnd,this),this.node.on("touchcancel",this._onTouchCancel,this)},disableTouch:function(){this.node.off("touchstart",this._onTouchStart,this),this.node.off("touchend",this._onTouchEnd,this),this.node.off("touchcancel",this._onTouchCancel,this)},_onTouchStart:function(t){return this.activeTouch={time:Date.now,start:t.touch.getLocation()},this.node.scale=this.targetScale*this.origScale,!1},_onTouchEnd:function(t){if(this.activeTouch){var e=t.touch.getLocation();this.node.scale=this.origScale;var n=Math.abs(this.activeTouch.start.x-e.x);if(n>30)return!1;var o=Date.now-this.activeTouch.time;if(o>.5)return!1;this.node.emit(MTEvents.CLICKED);var i=this.clickEvent;if(i){var c=i.target.getComponent(i.component),a=c[i.handler];a.bind(c)()}return this.activeTouch=null,!0}},_onTouchCancel:function(){this.node.scale=this.origScale,this.activeTouch=null}}),cc._RF.pop()},{}],Dialog1:[function(t,e,n){"use strict";cc._RF.push(e,"17458Ud8ZhEAbI0jc1jHj5y","Dialog1");var o=t("AnswerButton"),i=t("EvaluationDialog");cc.Class({"extends":cc.Component,properties:{headline:{"default":null,type:cc.Node},text:{"default":null,type:cc.Node},smiley:{"default":null,type:cc.Node},faces:[cc.SpriteFrame],button:{"default":null,type:cc.Prefab},data:{visible:!1,"default":null},buttons:{visible:!1,"default":null},overlay:{"default":null,type:cc.Node}},onLoad:function(){this.buttons=[]},showWithData:function(t){this.data=t,this.node.active=!0,this.smiley.getComponent(cc.Sprite).spriteFrame=this.faces[t.smileyType],this.headline.getComponent(cc.Label).string=t.headline.toUpperCase(),t.headline.indexOf("\n")>0?this.headline.parent.y=220:this.headline.parent.y=186,this.setTextFromTree(t.tree),this.showTreeAnswers(t.tree),this.overlay.active=!0},setTextFromTree:function(t){this.text.getComponent(cc.Label).string=t.text},showTreeAnswers:function(t){for(var e=0;e<this.buttons.length;e++){var n=this.buttons[e];n.isValid&&n.destroy()}this.buttons.length=0;for(var i=0,e=0;e<t.answers.length;e++){var c=cc.instantiate(this.button),a=c.getComponent(o),s=t.answers[e];a.setText(s.text),a.data=s,c.y=i-c.height/2-10,i-=c.height+10,c.x=8,this.node.addChild(c),c.on("click",this.onAnswered,this),this.buttons.push(c)}},onAnswered:function(t){var e=t.currentTarget,n=e.getComponent(o),i=n.data;i.tree?(this.setTextFromTree(i.tree),this.showTreeAnswers(i.tree)):this.showEvaluation(i.evaluation)},showEvaluation:function(t){for(var e=null,n=this.data.evaluations,o=0;o<n.length;o++)if(n[o].id==t){e=n[o];break}if(!e)throw new Error("Evaluation not found, id:"+t);this.node.emit(MTEvents.EVALED,e),console.log(e);var c=this.node.parent.getChildByName("Evaluation");c.active=!0;var a=c.getComponent(i);a.showWithData(e),this.hide()},hide:function(){this.node.active=!1}}),cc._RF.pop()},{AnswerButton:"AnswerButton",EvaluationDialog:"EvaluationDialog"}],EndScene:[function(t,e,n){"use strict";cc._RF.push(e,"0cbae4KYMlIFobR1lIhW1GO","EndScene");var o=t("Score");cc.Class({"extends":cc.Component,properties:{},start:function(){var t=GameManager.lastScore;if(t)for(var e=this.node.getChildByName("score").getComponent(o),n=0;n<t.length;n++)e.addScore(t[n])},onRepeat:function(){cc.director.loadScene("gameScene")},shareFB:function(){return FB?void FB.ui({method:"share",mobile_iframe:!0,href:"https://developers.facebook.com/docs/"},function(t){}):void console.log("FB not found")}}),cc._RF.pop()},{Score:"Score"}],EvaluationDialog:[function(t,e,n){"use strict";cc._RF.push(e,"4d761+qMv1LLbUPN5I57fLx","EvaluationDialog"),cc.Class({"extends":cc.Component,properties:{text:{"default":null,type:cc.Node},nextBtn:{"default":null,type:cc.Node},overlay:{"default":null,type:cc.Node},addit:{"default":null,visible:!1},sourceDialog:{"default":null,type:cc.Node},data:{visible:!1,"default":null}},onLoad:function(){},showWithData:function(t){this.node.active=!0,this.text.getComponent(cc.Label).string=t.text,this.nextBtn.on("click",this.onNextClicked,this),0===t.type.indexOf("eval")&&(this.addit=this.node.getChildByName("parts").getChildByName(t.type),console.log(this.addit),this.addit&&(this.addit.active=!0)),this.data=t},onNextClicked:function(){this.node.parent.emit(MTEvents.COMPLETE),this.addit&&(this.addit.active=!1),GameManager.currentData=null,this.overlay.active=!1,this.node.active=!1},showSourceInfo:function(){this.sourceDialog.active=!0,console.log(this.sourceDialog),this.sourceDialog.getComponent("SourceDialog").showLinks(GameManager.currentData.sources)}}),cc._RF.pop()},{}],GameManager:[function(t,e,n){"use strict";cc._RF.push(e,"f30bfv587dMhrQUL2Ks6/Rs","GameManager"),window.GameManager={data:null,lastScore:null,currentData:null,onLoad:function(){cc.view.enableRetina(!0);var t=this;cc.loader.load(cc.url.raw("resources/questions.json"),function(e,n){e?cc.log("loading error:"+e):cc.log("loaded succesfully!"),t.data=n,console.log(n)})}},cc._RF.pop()},{}],GameScene:[function(t,e,n){"use strict";cc._RF.push(e,"7e8d8Jzlv9J4J2X7NIapfQg","GameScene");var o=t("Score");cc.Class({"extends":cc.Component,properties:{psn:[cc.String],numRounds:{visible:!1,"default":0},scoreComp:{"default":null,type:o},score:{visible:!1,"default":null},factman:{"default":null,type:cc.Node}},onLoad:function(){window.GameManager.onLoad(),cc.TextUtils.label_lastWordRex=/([a-zA-Z0-9ÄÖÜäöüßěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤéèçàùêâîôûа-яА-ЯЁё]+|\S)$/,cc.TextUtils.label_lastEnglish=/[a-zA-Z0-9ÄÖÜäöüßěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõ-яА-ЯЁё]+$/,cc.TextUtils.label_firsrEnglish=/^[a-zA-Z0-9ÄÖÜäöüßěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõ-яА-ЯЁё]/,this.node.on(MTEvents.COMPLETE,this.setNewRound,this);var t=this.node.getChildByName("Dialog");t.active=!1;var e=this.node.getChildByName("Evaluation");e.active=!1,this.score=[]},setNewRound:function(){var t=cc.find("Canvas/Map/manace");if(this.numRounds>=6)return t.active=!1,void this.gameEnd();var e=this.psn[Math.floor(this.psn.length*Math.random())],n=e.split(" ");t.x=parseInt(n[0]),t.y=parseInt(n[1]),this.factman.active=!0},onMenace:function(){if(!GameManager.currentData){var t=window.GameManager.data[0];GameManager.currentData=t;var e=this.node.getChildByName("Dialog");e.getComponent("Dialog1").showWithData(t),e.active=!0,e.on(MTEvents.EVALED,this.roundFinished,this),this.factman.active=!1}},roundFinished:function(t){this.numRounds++,this.scoreComp.addScore(t.detail.score),this.score.push(t.detail.score)},gameEnd:function(){GameManager.lastScore=this.score;var t=this.node.getChildByName("overlay");t.opacity=0,t.active=!0;var e=new cc.FadeIn(1);t.runAction(e),setTimeout(function(){cc.director.loadScene("endScene")},1050)}}),cc._RF.pop()},{Score:"Score"}],InitScene:[function(t,e,n){"use strict";cc._RF.push(e,"1a672DPMPlJu5K5wqEhsL+j","InitScene"),cc.Class({"extends":cc.Component,properties:{overlay:{"default":null,type:cc.Node},startBtn:{"default":null,type:cc.Node},bubble:{"default":null,type:cc.Node}},onLoad:function(){},start:function(){},startGame:function(){this.startBtn.active=!1,this.bubble.active=!1,this.overlay.runAction(new cc.fadeOut(5)),cc.director.loadScene("gameScene")}}),cc._RF.pop()},{}],MTEvents:[function(t,e,n){"use strict";cc._RF.push(e,"20a8b7s+RJF9a/8hhfPlE+c","MTEvents");var o={};o.CLICKED="mt-event-clicked",o.START="mt-event-start",o.COMPLETE="mt-event-complete",o.CANCEL="mt-event-cancel",o.DESTROY="mt-event-destroy",o.EVALED="mt-event-evaled",o.SELECTED="mt-event-selected",o["default"]=null,window.MTEvents=o,cc._RF.pop()},{}],Score:[function(t,e,n){"use strict";cc._RF.push(e,"4648fad1eNDjolncrTz5p74","Score"),cc.Class({"extends":cc.Component,properties:{crossSprite:{"default":null,type:cc.SpriteFrame},circleSprite:{"default":null,type:cc.SpriteFrame},checkSprite:{"default":null,type:cc.SpriteFrame},buttons:{visible:!1,"default":null}},onLoad:function(){this.buttons=[]},addScore:function(t){var e=new cc.Node,n=e.addComponent(cc.Sprite);switch(t){case 0:n.spriteFrame=this.crossSprite;break;case 1:n.spriteFrame=this.circleSprite;break;case 2:n.spriteFrame=this.checkSprite}this.node.addChild(e),e.x=30*this.buttons.length,this.buttons.push(e)}}),cc._RF.pop()},{}],SourceDialog:[function(t,e,n){"use strict";cc._RF.push(e,"c1a92kE8z9C7KOwjP8hmcgQ","SourceDialog");var o=t("SourceLink");cc.Class({"extends":cc.Component,properties:{linkButton:{"default":null,type:cc.Prefab}},onLoad:function(){},showLinks:function(t){for(var e=0,n=0;n<t.length;n++){var i=cc.instantiate(this.linkButton),c=i.getComponent(o),a=t[n];c.setText(a),c.data=a,i.y=e-i.height/2+180,e-=i.height+5,this.node.addChild(i),i.on("clicked",this.onClicked,this)}},onClicked:function(t){var e=t.currentTarget.getComponent(o).data;window.open(e.url,"_blank")},close:function(){this.node.active=!1}}),cc._RF.pop()},{SourceLink:"SourceLink"}],SourceLink:[function(t,e,n){"use strict";cc._RF.push(e,"626c0+cWztI0KLdpajXCCqU","SourceLink"),cc.Class({"extends":cc.Component,properties:{nameNode:{"default":null,type:cc.Node},title:{"default":null,type:cc.Node},bg:{"default":null,type:cc.Node},activeTouch:{visible:!1,"default":null},data:{visible:!1,"default":null}},onLoad:function(){this.enableTouch(),this.bg.skewX=4*Math.random()-2},enableTouch:function(){this.node.on("touchstart",this._onTouchStart,this),this.node.on("touchend",this._onTouchEnd,this),this.node.on("touchcancel",this._onTouchCancel,this),this.node.on("mouseenter",this._onMouseEnter,this),this.node.on("mouseleave",this._onMouseLeave,this)},_onMouseEnter:function(){this.bg.opacity=255,this.nameNode.color=this.getClr("#ceb184")},_onMouseLeave:function(){this.bg.opacity=0,this.nameNode.color=this.getClr("#282634")},_onTouchStart:function(t){return this.activeTouch={time:Date.now,start:t.touch.getLocation()},!1},getClr:function(t){var e=new cc.Color;return e.fromHEX(t),e},setText:function(t){this.nameNode.getComponent(cc.Label).string=t.name,this.title.getComponent(cc.Label).string=t.title},_onTouchEnd:function(t){if(this.activeTouch){var e=t.touch.getLocation(),n=Math.abs(this.activeTouch.start.x-e.x);if(n>30)return!1;var o=Date.now-this.activeTouch.time;return!(o>.5)&&(this.node.emit("clicked"),this.activeTouch=null,!0)}},_onTouchCancel:function(){this.activeTouch=null}}),cc._RF.pop()},{}]},{},["AnswerButton","ClickWithLabelMove","ClickWithScale","Dialog1","EvaluationDialog","GameManager","MTEvents","Score","SourceDialog","SourceLink","EndScene","GameScene","InitScene"]);